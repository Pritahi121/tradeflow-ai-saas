(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1198:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_188709",variable:"__variable_188709"}},1290:()=>{},3941:(e,t,a)=>{"use strict";a.d(t,{N:()=>r});let r=(0,a(945).UU)("https://placeholder.supabase.co","placeholder-anon-key")},4705:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},8041:(e,t,a)=>{Promise.resolve().then(a.bind(a,9293)),Promise.resolve().then(a.t.bind(a,1198,23)),Promise.resolve().then(a.t.bind(a,4705,23)),Promise.resolve().then(a.t.bind(a,1290,23))},9293:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,AuthProvider:()=>o});var r=a(5155),n=a(2115),s=a(3941);let l=(0,n.createContext)({user:null,session:null,loading:!0,signIn:async()=>({data:null,error:null}),signUp:async()=>({data:null,error:null}),signOut:async()=>{}}),i=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},o=e=>{let{children:t}=e,[a,i]=(0,n.useState)(null),[o,u]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await s.N.auth.getSession();u(t),i(null!=(e=null==t?void 0:t.user)?e:null),d(!1)})();let{data:{subscription:e}}=s.N.auth.onAuthStateChange(async(e,t)=>{var a;u(t),i(null!=(a=null==t?void 0:t.user)?a:null),d(!1),"SIGNED_IN"===e&&(null==t?void 0:t.user)&&await _(t.user)});return()=>e.unsubscribe()},[]);let _=async e=>{try{var t,a;let{error:r}=await s.N.from("clients").insert({client_id:"client_".concat(e.id.slice(0,8)),user_id:e.id,name:(null==(t=e.user_metadata)?void 0:t.name)||"User",company:(null==(a=e.user_metadata)?void 0:a.company)||"Company",email:e.email});r&&console.error("Error creating client:",r);let{error:n}=await s.N.from("user_quotas").insert({user_id:e.id,monthly_quota:10,remaining_credits:10,monthly_credits:10});n&&console.error("Error creating user quota:",n)}catch(e){console.error("Error in handleNewUser:",e)}},h=async(e,t)=>{let{data:a,error:r}=await s.N.auth.signInWithPassword({email:e,password:t});return{data:a,error:r}},m=async(e,t,a)=>{let{data:r,error:n}=await s.N.auth.signUp({email:e,password:t,options:{data:a}});return{data:r,error:n}},y=async()=>{await s.N.auth.signOut()};return(0,r.jsx)(l.Provider,{value:{user:a,session:o,loading:c,signIn:h,signUp:m,signOut:y},children:t})}}},e=>{e.O(0,[286,741,945,441,255,358],()=>e(e.s=8041)),_N_E=e.O()}]);